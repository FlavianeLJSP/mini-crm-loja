<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mini CRM - Sua Loja</title>
    <link rel="stylesheet" href="css/style.css" />
    <style>
      /* Estilos b√°sicos para a tela de login (voc√™ pode customizar no style.css) */
      #login-section {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        text-align: center;
        background-color: #f4f4f4; /* Cor de fundo simples */
      }
      #login-section input,
      #login-section button {
        padding: 10px;
        margin: 8px 0;
        width: 300px;
        border-radius: 4px;
        border: 1px solid #ccc;
      }
      #login-section button {
        background-color: #007bff;
        color: white;
        cursor: pointer;
        border: none;
      }
    </style>
  </head>
  <body>
    <section id="login-section" style="display: none">
      <h1>Mini CRM - Login</h1>
      <p>Acesso Restrito: Por favor, insira seu e-mail e senha.</p>
      <input type="email" id="login-email" placeholder="Seu E-mail" required />
      <input
        type="password"
        id="login-senha"
        placeholder="Sua Senha"
        required
      />
      <button onclick="fazerLogin()">Entrar</button>
      <div id="login-error-message" style="color: red; margin-top: 10px"></div>
    </section>

    <div id="app-container" class="app-container" style="display: none">
      <aside class="sidebar">
        <div class="logo">
          <h1>Mini CRM</h1>
        </div>
        <nav class="nav-menu">
          <ul>
            <li class="nav-item active" data-target="clientes-section">
              <span class="icon">üë•</span> Clientes
            </li>
            <li class="nav-item" data-target="produtos-section">
              <span class="icon">üì¶</span> Produtos
            </li>
            <li class="nav-item" data-target="vendas-section">
              <span class="icon">üí∞</span> Vendas
            </li>
            <li class="nav-item" data-target="caixa-section">
              <span class="icon">üí∏</span> Fluxo de Caixa
            </li>
            <li class="nav-item" data-target="insumos-section">
              <span class="icon">‚öôÔ∏è</span> Insumos
            </li>
          </ul>
        </nav>
        <div style="padding: 20px">
          <button class="add-btn delete-btn" onclick="fazerLogout()">
            Sair
          </button>
        </div>
      </aside>

      <main class="content-wrapper">
        <header id="top-header" class="top-header">
          <h2>Clientes</h2>
          <div class="user-info">Ol√°, Administrador</div>
        </header>

        <div id="content-container" class="content-container">
          <section id="clientes-section" class="page-section active-section">
            <div class="section-actions">
              <button class="add-btn" onclick="abrirModalCadastro('cliente')">
                + Novo Cliente
              </button>
            </div>

            <div class="section-content">
              <div class="card card-table full-width">
                <h2>Lista de Clientes</h2>
                <div class="tabela-container">
                  <table>
                    <thead>
                      <tr>
                        <th>Nome</th>
                        <th>Telefone</th>
                        <th>Endere√ßo</th>
                        <th>Status Pag.</th>
                        <th>A√ß√µes</th>
                      </tr>
                    </thead>
                    <tbody id="lista-clientes-body"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>

          <section id="produtos-section" class="page-section">
            <div class="section-actions">
              <button class="add-btn" onclick="abrirModalCadastro('produto')">
                + Novo Produto
              </button>
            </div>

            <div class="section-content">
              <div class="card card-table full-width">
                <h2>Invent√°rio de Produtos</h2>
                <div class="tabela-container">
                  <table>
                    <thead>
                      <tr>
                        <th>Nome</th>
                        <th>C√≥digo</th>
                        <th>Estoque</th>
                        <th>Unidade</th>
                        <th>Vencimento</th>
                        <th>Custo (R$)</th>
                        <th>Fornecedor</th>
                        <th>Data da compra</th>
                        <th>Forma de pagamento</th>
                        <th>A√ß√µes</th>
                      </tr>
                    </thead>
                    <tbody id="lista-produtos-body"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>

          <section id="vendas-section" class="page-section">
            <div class="section-actions">
              <button class="add-btn" onclick="abrirModalCadastro('venda')">
                + Nova Venda
              </button>
            </div>

            <div class="section-content">
              <div class="card card-table full-width">
                <h2>Hist√≥rico de Vendas</h2>
                <div class="tabela-container">
                  <table id="tabela-vendas">
                    <thead>
                      <tr>
                        <th>Cliente</th>
                        <th>Produto(s)</th>
                        <th>Qtd. Total</th>
                        <!-- Removido Pre√ßo Unit. para dar espa√ßo -->
                        <th>Valor Total</th>
                        <th>Data</th>
                        <th>Forma de pagamento</th>
                        <th>A√ß√µes</th>
                      </tr>
                    </thead>
                    <tbody id="lista-vendas-body"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>

          <section id="caixa-section" class="page-section">
            <div class="section-actions">
              <button
                class="add-btn"
                onclick="abrirModalCadastro('recebimento')"
              >
                + Nova Entrada
              </button>
              <button
                class="add-btn delete-btn"
                style="margin-left: 10px"
                onclick="abrirModalCadastro('despesa')"
              >
                - Nova Sa√≠da
              </button>
            </div>
            <div class="section-content">
              <div class="card card-table full-width">
                <h2>Hist√≥rico de Fluxo de Caixa</h2>
                <div class="tabela-container">
                  <table>
                    <thead>
                      <tr>
                        <th>Data</th>
                        <th>Tipo</th>
                        <th>Origem/Destino</th>
                        <th>Valor (R$)</th>
                        <th>Descri√ß√£o</th>
                        <th>A√ß√µes</th>
                      </tr>
                    </thead>
                    <tbody id="lista-caixa-body"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>
          <section id="insumos-section" class="page-section">
            <div class="section-actions">
              <button class="add-btn" onclick="abrirModalCadastro('insumo')">
                + Novo Insumo
              </button>
            </div>
            <div class="section-content">
              <div class="card card-table full-width">
                <h2>Invent√°rio de Insumos</h2>
                <div class="tabela-container">
                  <table>
                    <thead>
                      <tr>
                        <th>Nome</th>
                        <th>Quantidade</th>
                        <th>Custo Total (R$)</th>
                        <th>Data Cadastro</th>
                        <th>A√ß√µes</th>
                      </tr>
                    </thead>
                    <tbody id="lista-insumos-body"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>

    <div id="modal-cadastro" class="modal-backdrop">
      <div class="modal-content">
        <span class="close-btn" onclick="fecharModalCadastro()">&times;</span>
        <h3 id="modal-cadastro-titulo">Novo Cadastro</h3>

        <div id="modal-cadastro-body"></div>

        <button id="modal-cadastro-salvar" class="salvar-btn">Salvar</button>
      </div>
    </div>

    <div id="modal-edicao" class="modal-backdrop">
      <div class="modal-content">
        <span class="close-btn" onclick="fecharModalEdicao()">&times;</span>
        <h3 id="modal-titulo">Editar Item</h3>

        <form id="edicao-form">
          <input type="hidden" id="edicao-id" />
          <input type="hidden" id="edicao-colecao" />

          <div id="edicao-campos"></div>

          <button type="submit" class="salvar-btn">Salvar Altera√ß√µes</button>
        </form>
      </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script>
      // CR√çTICO: Mantenha suas credenciais do Firebase aqui.
      // Substitua TUDO entre as aspas pelas SUAS credenciais.

      const firebaseConfig = {
        apiKey: "AIzaSyC5GhWN1VAGl3P_BVjkHvC1tqJ2TTeFvPc", // SEU API KEY
        authDomain: "mini-crm-minhaloja.firebaseapp.com", // SEU AUTH DOMAIN
        projectId: "mini-crm-minhaloja", // SEU PROJECT ID
        storageBucket: "mini-crm-minhaloja.appspot.com", // SEU STORAGE BUCKET
        messagingSenderId: "751950776685",
        appId: "1:751950776685:web:765690e2393a3ddeb33264",
      };

      // Inicializa o Firebase e define as vari√°veis globais 'db', 'storage' e 'auth'
      if (firebase.apps.length === 0) {
        firebase.initializeApp(firebaseConfig);
      }
      const db = firebase.firestore();
      const storage = firebase.storage();
      const auth = firebase.auth(); // NOVO: Objeto de Autentica√ß√£o
    </script>

    <script src="js/app.js"></script>
  </body>
</html>
